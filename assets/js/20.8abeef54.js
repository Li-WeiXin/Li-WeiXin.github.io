(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{416:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"从-github-actions-自动构建到-crontab-定时推送-博客自动化部署方案演进"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-github-actions-自动构建到-crontab-定时推送-博客自动化部署方案演进"}},[s._v("#")]),s._v(" 从 GitHub Actions 自动构建到 crontab 定时推送：博客自动化部署方案演进")]),s._v(" "),a("p",[s._v("在个人博客系统的开发和维护过程中，自动化部署是一个关键环节。本文将详细介绍从使用 GitHub Actions 自动构建到配置 crontab 定时推送的演进过程，帮助你构建一个更加智能和可靠的博客发布系统。")]),s._v(" "),a("h2",{attrs:{id:"_1-初始方案-github-actions-自动构建"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-初始方案-github-actions-自动构建"}},[s._v("#")]),s._v(" 1. 初始方案：GitHub Actions 自动构建")]),s._v(" "),a("p",[s._v("最初，我们采用了 GitHub Actions 来实现博客的自动化部署。这种方式通过在代码推送到仓库时自动触发构建和部署流程。")]),s._v(" "),a("h3",{attrs:{id:"_1-1-配置-personal-access-token"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-配置-personal-access-token"}},[s._v("#")]),s._v(" 1.1 配置 Personal Access Token")]),s._v(" "),a("p",[s._v("为了使 GitHub Actions 能够部署代码到外部仓库，我们需要配置 Personal Access Token：")]),s._v(" "),a("ol",[a("li",[s._v("登录 GitHub，进入 Settings > Developer settings > Personal access tokens > Tokens (classic)")]),s._v(" "),a("li",[s._v('点击 "Generate new token (classic)"')]),s._v(" "),a("li",[s._v('填写描述 (如 "Blog Deployment Token")，选择过期时间')]),s._v(" "),a("li",[s._v("仅勾选 "),a("code",[s._v("public_repo")]),s._v(" 权限")]),s._v(" "),a("li",[s._v('点击 "Generate token"，复制生成的 token 并妥善保存')])]),s._v(" "),a("h3",{attrs:{id:"_1-2-在仓库中配置-secret"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-在仓库中配置-secret"}},[s._v("#")]),s._v(" 1.2 在仓库中配置 Secret")]),s._v(" "),a("ol",[a("li",[s._v("进入博客仓库的 Settings > Secrets and variables > Actions")]),s._v(" "),a("li",[s._v("删除 "),a("code",[s._v("DEPLOY_KEY")]),s._v("（如果存在）")]),s._v(" "),a("li",[s._v('点击 "New repository secret"')]),s._v(" "),a("li",[s._v("名称输入 "),a("code",[s._v("PERSONAL_TOKEN")]),s._v("，值为复制的 token")])]),s._v(" "),a("h3",{attrs:{id:"_1-3-更新-github-actions-工作流"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-更新-github-actions-工作流"}},[s._v("#")]),s._v(" 1.3 更新 GitHub Actions 工作流")]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v(".github/workflows/daily-deploy.yml")]),s._v(" 中配置：")]),s._v(" "),a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy to GitHub Pages\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" master "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("workflow_dispatch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("jobs")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("deploy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("runs-on")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ubuntu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("latest\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("steps")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Checkout\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/checkout@v3\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Setup Node.js\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" actions/setup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("node@v3\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("node-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'16'")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yarn'")]),s._v("\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Install dependencies\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" yarn install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("frozen"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("lockfile\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Build\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" yarn build\n\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Deploy to GitHub Pages\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("uses")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" peaceiris/actions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("gh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("pages@v3\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("personal_token")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" secrets.PERSONAL_TOKEN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("external_repository")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" your"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("username/your"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v("username.github.io\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("publish_dir")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./public\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("publish_branch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("h2",{attrs:{id:"_2-演进方案-crontab-定时推送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-演进方案-crontab-定时推送"}},[s._v("#")]),s._v(" 2. 演进方案：crontab 定时推送")]),s._v(" "),a("p",[s._v("随着需求的发展，我们希望实现更加自动化的部署流程，于是转向了使用本地 crontab 定时推送的方案。")]),s._v(" "),a("h3",{attrs:{id:"_2-1-crontab-基本概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-crontab-基本概念"}},[s._v("#")]),s._v(" 2.1 crontab 基本概念")]),s._v(" "),a("h3",{attrs:{id:"_2-1-1-什么是-cron-和-crontab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-什么是-cron-和-crontab"}},[s._v("#")]),s._v(" 2.1.1 什么是 cron 和 crontab")]),s._v(" "),a("p",[s._v("crontab（cron table 的缩写）是类 Unix 系统下的定时任务管理工具，允许用户在指定的时间自动执行预设的命令或脚本。它是系统管理员和开发人员实现自动化任务的重要工具。")]),s._v(" "),a("p",[s._v("cron 是类 Unix 系统下的一个守护进程，用于在后台定期执行命令。它通常在系统启动时自动运行，并根据配置的时间表执行各种任务。")]),s._v(" "),a("p",[s._v("crontab 是管理 cron 任务的命令行工具，允许用户创建、编辑、查看和删除定时任务。每个用户都可以拥有自己的 crontab 文件，系统也有全局的 crontab 文件。")]),s._v(" "),a("p",[s._v("常用时间表达式示例：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("0 10 * * *")]),s._v(" - 每天上午 10:00 执行")]),s._v(" "),a("li",[a("code",[s._v("0 10 * * 1-5")]),s._v(" - 每个工作日（周一到周五）上午 10:00 执行")]),s._v(" "),a("li",[a("code",[s._v("0 2 1 * *")]),s._v(" - 每月 1 号凌晨 2:00 执行")]),s._v(" "),a("li",[a("code",[s._v("*/5 * * * *")]),s._v(" - 每隔 5 分钟执行一次")]),s._v(" "),a("li",[a("code",[s._v("@reboot")]),s._v(" - 系统启动时执行")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-创建自动部署脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-创建自动部署脚本"}},[s._v("#")]),s._v(" 2.2 创建自动部署脚本")]),s._v(" "),a("p",[s._v("首先，创建一个适用于 zsh 环境的自动部署脚本 "),a("code",[s._v("auto-deploy.sh")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/usr/bin/env zsh")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自动部署脚本 (适用于 zsh)")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保脚本抛出遇到的错误")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取脚本所在目录")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("script_dir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${0"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("a"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("h}")]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$script_dir")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输出当前时间")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"开始提交博客更改: '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 确保使用正确的 Node.js 和 yarn")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/bin:'),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),s._v('"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成静态文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"正在构建博客..."')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" build\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加并提交更改到博客仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-A")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Auto commit at '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"没有需要提交的更改"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 推送到远程仓库以触发 GitHub Actions")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" push origin master\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"提交完成: '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GitHub Actions 将自动触发部署"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("h3",{attrs:{id:"_2-3-设置脚本执行权限"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-设置脚本执行权限"}},[s._v("#")]),s._v(" 2.3 设置脚本执行权限")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /path/to/your/blog/auto-deploy.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-4-配置-crontab-定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-配置-crontab-定时任务"}},[s._v("#")]),s._v(" 2.4 配置 crontab 定时任务")]),s._v(" "),a("p",[s._v("使用 "),a("code",[s._v("crontab -e")]),s._v(" 命令编辑定时任务：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置环境变量")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("SHELL")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/bin/zsh\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 工作日上午 10 点自动部署博客（周一到周五）")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" * * "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-5 /path/to/your/blog/auto-deploy.sh "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /path/to/your/blog/deploy.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("&1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_2-5-验证配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-验证配置"}},[s._v("#")]),s._v(" 2.5 验证配置")]),s._v(" "),a("p",[s._v("保存并退出编辑器后，可以通过以下命令验证：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-两种方案的对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-两种方案的对比"}},[s._v("#")]),s._v(" 3. 两种方案的对比")]),s._v(" "),a("h3",{attrs:{id:"_3-1-github-actions-方案优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-github-actions-方案优势"}},[s._v("#")]),s._v(" 3.1 GitHub Actions 方案优势")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("环境隔离")]),s._v("：在标准化的虚拟环境中运行，不受本地环境影响")]),s._v(" "),a("li",[a("strong",[s._v("可视化监控")]),s._v("：可以通过 GitHub 界面查看执行状态和日志")]),s._v(" "),a("li",[a("strong",[s._v("触发灵活")]),s._v("：支持推送触发、手动触发和定时触发等多种方式")]),s._v(" "),a("li",[a("strong",[s._v("安全性")]),s._v("：Secrets 管理机制更加安全")])]),s._v(" "),a("h3",{attrs:{id:"_3-2-crontab-方案优势"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-crontab-方案优势"}},[s._v("#")]),s._v(" 3.2 crontab 方案优势")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("完全自动化")]),s._v("：无需手动推送代码，系统自动完成构建和推送")]),s._v(" "),a("li",[a("strong",[s._v("本地控制")]),s._v("：完全由本地机器控制，不依赖外部服务")]),s._v(" "),a("li",[a("strong",[s._v("资源节省")]),s._v("：不需要 GitHub Actions 的运行时间")]),s._v(" "),a("li",[a("strong",[s._v("灵活性")]),s._v("：可以根据本地环境定制更复杂的逻辑")])]),s._v(" "),a("h2",{attrs:{id:"_4-最佳实践建议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-最佳实践建议"}},[s._v("#")]),s._v(" 4. 最佳实践建议")]),s._v(" "),a("ol",[a("li",[a("strong",[s._v("备份策略")]),s._v("：无论采用哪种方案，都要确保代码有备份")]),s._v(" "),a("li",[a("strong",[s._v("日志监控")]),s._v("：配置完善的日志记录机制，便于问题排查")]),s._v(" "),a("li",[a("strong",[s._v("错误处理")]),s._v("：在脚本中添加适当的错误处理逻辑")]),s._v(" "),a("li",[a("strong",[s._v("权限管理")]),s._v("：合理设置 Personal Access Token 的权限和有效期")]),s._v(" "),a("li",[a("strong",[s._v("测试验证")]),s._v("：在正式使用前充分测试自动化流程")])]),s._v(" "),a("h2",{attrs:{id:"_5-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-总结"}},[s._v("#")]),s._v(" 5. 总结")]),s._v(" "),a("p",[s._v("从 GitHub Actions 自动构建到 crontab 定时推送的演进，体现了自动化部署方案的不断优化。两种方案各有优势，可以根据实际需求选择合适的方案。对于个人博客项目，crontab 定时推送方案提供了更高的自动化程度和本地控制能力，是一个值得推荐的选择。")]),s._v(" "),a("p",[s._v("通过合理配置 Personal Access Token 和 crontab 定时任务，我们可以构建一个稳定、可靠的博客自动化发布系统，让内容创作更加专注，无需过多关注部署细节。")])])}),[],!1,null,null,null);a.default=e.exports}}]);